(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{115:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(9),c=t.n(o),l=t(65),s=t(66),i=t(72),m=t(71),u=t(22),p=t(10),d=(t(90),t(15)),g=t(23),f=t(35),h=t(161),E=t(160),b=t(153),v=t(159),w=t(155),O=t(154),j=t(43),x=t.n(j),y=t(117),k=t(148),N=t(151),I=Object(n.createContext)(),C=t(20),P=t.n(C);var S={isLoggedIn:function(){return!!localStorage.getItem("token")},logIn:function(e,a,t){P.a.post("/api/authenticate",{username:e,password:a}).then((function(e){localStorage.setItem("token",e.data.token),t(e.data)}))},logOut:function(e){localStorage.removeItem("token"),e()},getToken:function(){return localStorage.getItem("token")}},U=Object(k.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var W=Object(p.f)((function(e){var a=Object(n.useState)({username:"",password:""}),t=Object(f.a)(a,2),o=t[0],c=t[1],l=Object(n.useContext)(I),s=function(e){var a=e.target,t=a.name,n=a.value,r=Object(g.a)(Object(g.a)({},o),{},Object(d.a)({},t,n));c(r)},i=function(a){a.preventDefault();var t=o.username,n=o.password;t&&n&&S.logIn(t,n,(function(a){l.setUser(a),e.history.push("/")}))},m=U();return r.a.createElement(N.a,{component:"main",maxWidth:"xs"},r.a.createElement(b.a,null),r.a.createElement("div",{className:m.paper},r.a.createElement(h.a,{className:m.avatar},r.a.createElement(x.a,null)),r.a.createElement(y.a,{component:"h1",variant:"h5"},"Log In"),r.a.createElement("form",{className:m.form,onSubmit:i,noValidate:!0},r.a.createElement(O.a,{container:!0,spacing:2},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:o.username,onChange:s})),r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:o.password,onChange:s}))),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:m.submit,onClick:i},"Log In"),r.a.createElement(O.a,{container:!0},r.a.createElement(O.a,{item:!0},r.a.createElement(w.a,{href:"/signup",variant:"body2"},"Don't have an account yet? Sign Up"))))))}));var q=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,null))},D=t(49),T=t.n(D),L=function(e){return P.a.post("/api/signup",e)},F=function(){return P.a.get("/api/me",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})},R=Object(k.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},errors:{fontWeight:"bolder",color:"red"}}}));var A=Object(p.f)((function(e){var a=Object(n.useState)({username:"",password:"",confirmPassword:""}),t=Object(f.a)(a,2),o=t[0],c=t[1],l={username:"",password:"",confirmPassword:"",duplicate:""},s=Object(n.useState)(l),i=Object(f.a)(s,2),m=i[0],u=i[1],p=function(e){var a=e.target,t=a.name,n=a.value,r=Object(g.a)(Object(g.a)({},o),{},Object(d.a)({},t,n));c(r);var l=Object(g.a)({},m);switch(t){case"username":l.username=n.length<3?"minimum of 3 characters required":"";break;case"password":l.password=n.length<6?"minimum of 6 characters required":"";break;case"confirmPassword":l.confirmPassword=o.password!==n?"Must match Password":""}u(l)},j=Object(n.useContext)(I),k=function(a){a.preventDefault();var t=o.username,n=o.password,r=o.confirmPassword;(console.log("user name--\x3e ",t),console.log("password---\x3e ",n),function(e){var a=!0;return Object.values(e).forEach((function(e){e.length>0&&(a=!1)})),a}(m))&&(t&&n===r&&L({username:t,password:n},(function(e){console.log(e)})).then(S.logIn(t,n,(function(a){j.setUser(a),e.history.push("/")}))).catch((function(e){console.log(e.response.data.error),u(Object(g.a)(Object(g.a)({},l),{},{duplicate:"Username is taken. Please try again."}))})))},C=R();return r.a.createElement(N.a,{component:"main",maxWidth:"xs"},r.a.createElement(b.a,null),r.a.createElement("div",{className:C.paper},r.a.createElement(h.a,{className:C.avatar},r.a.createElement(x.a,null)),r.a.createElement(y.a,{component:"h1",variant:"h5"},"Sign Up"),r.a.createElement("form",{className:C.form,onSubmit:k,noValidate:!0},r.a.createElement(O.a,{container:!0,spacing:2},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:o.username,onChange:p}),m.username.length>0&&r.a.createElement("span",{className:C.errors},m.username),m.duplicate.length>0&&r.a.createElement("span",{className:C.errors},m.duplicate),r.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:o.password,onChange:p}),m.password.length>0&&r.a.createElement("span",{className:C.errors},m.password),r.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:"password",id:"confirmPassword",value:o.confirmPassword,onChange:p}),m.confirmPassword.length>0&&r.a.createElement("span",{className:C.errors},m.confirmPassword))),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:C.submit,onClick:k},"Sign Up"),r.a.createElement(O.a,{container:!0},r.a.createElement(O.a,{item:!0},r.a.createElement(w.a,{href:"/login",variant:"body2"},"Already have an account? Log In"))))))}));var z=function(){return r.a.createElement(A,null)},B=t(73),G=function(e){var a=e.component,t=Object(B.a)(e,["component"]);return r.a.createElement(p.b,Object.assign({},t,{render:function(e){return S.isLoggedIn()?r.a.createElement(a,e):r.a.createElement(p.a,{to:"/login"})}}))},J=t(70),M=t(158),V=t(156),H=t(157),K=Object(k.a)((function(e){var a,t;return{root:{flexGrow:1,margin:e.spacing(3)},title:(a={flexGrow:1,margin:5},Object(d.a)(a,e.breakpoints.down("xs"),{display:"none"}),Object(d.a)(a,"float","left"),Object(d.a)(a,"font","bold 40px Times New Roman, Times, serif"),a),avatar:{margin:5,float:"left"},link:(t={color:"white"},Object(d.a)(t,e.breakpoints.down("xs"),{fontSize:".75rem"}),Object(d.a)(t,"textDecoration","none"),t),appitems:Object(d.a)({},e.breakpoints.down("xs"),{margin:"0 auto"})}})),Q=function(e){var a=K();return r.a.createElement(V.a,{position:"static"},r.a.createElement(H.a,{className:a.appitems},e.loggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:"../logo192.png",alt:"logo",className:a.avatar,style:{height:"40px"}}),r.a.createElement(y.a,{variant:"h4",className:a.title},"shaREcipe")," ",r.a.createElement(E.a,null,r.a.createElement(u.b,{color:"inherit",to:"/home",className:a.link},"Home")),r.a.createElement(E.a,null,r.a.createElement(u.b,{color:"inherit",to:"/newrecipe",className:a.link},"New Recipe")),r.a.createElement(E.a,null,r.a.createElement(u.b,{color:"inherit",to:"/profile",className:a.link},"Profile"))):r.a.createElement("div",{style:{margin:"0 auto"}},r.a.createElement("img",{src:"../logo192.png",alt:"logo",className:a.avatar,style:{width:"50px"}}),r.a.createElement(y.a,{variant:"h4",className:a.title},"shaREcipe"))))},X=Object(J.a)({palette:{primary:{main:"#9a0036"},secondary:{main:"#dc004e"}}}),Y=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={user:null},e.setUser=function(a){e.setState({user:a})},e}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.getItem("token")&&F().then((function(a){e.setUser(a.data)}))}},{key:"render",value:function(){var e=this.state.user,a=this.setUser,t=S.isLoggedIn();return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{theme:X},r.a.createElement(N.a,null,r.a.createElement(u.a,null,r.a.createElement(Q,{loggedIn:t}),r.a.createElement(I.Provider,{value:{user:e,setUser:a}},r.a.createElement(G,{exact:!0,path:"/",component:T.a}),r.a.createElement(G,{exact:!0,path:"/home",component:T.a}),r.a.createElement(p.b,{exact:!0,path:"/login",component:q}),r.a.createElement(p.b,{exact:!0,path:"/signup",component:z}))))))}}]),t}(n.Component);c.a.render(r.a.createElement(Y,null),document.getElementById("root"))},49:function(e,a){},85:function(e,a,t){e.exports=t(115)},90:function(e,a,t){}},[[85,1,2]]]);
//# sourceMappingURL=main.a4009cfc.chunk.js.map